{% extends 'parent.html' %} 
{% load static %} 
{% block body %}
<style>
  /*Header Image*/
  .home {
    background-image: url(../static/images/bookslibrary.jpg);
    width: 100%;
    height: 37vh;
    background-size: cover;
    background-position: center;
  }

  @media (max-width: 530px) and (min-width: 350px) {
    .home h3 {
      text-align: center;
      font-size: 17px;
    }
    .home p {
      text-align: center;
      font-size: small;
    }
  }
  
  .required::after {
    content: " *";
    color: red;
  }
  
  /* Form styling for theme compatibility */
  .registration-container {
    background-color: var(--card-bg);
    color: var(--card-text);
    margin: 0 auto;
    border-radius: 15px;
    box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.3);
    padding: 20px;
  }
  
  .form-heading {
    color: var(--primary-color) !important;
  }
  
  .form-label {
    color: var(--primary-color) !important;
  }
  
  /*Header Image*/
</style>

<!-- Header Image -->
<div class="row">
  <section class="home">
    <div
      class="row"
      style="
        color: aliceblue;
        font-weight: bolder;
        font-family: poppins, sans-serif;
        padding-top: 22vh;
        text-align: center;
      "
    >
      <h3><b>From Our Content For Distance Learning</b></h3>
      <p style="font-family: poppins; font-weight: bolder">
        NOU-e-Gyan PORTAL, CONCEPT BY NALANDA OPEN UNIVERSITY
      </p>
    </div>
  </section>
</div>
<!-- Header Image -->

<!-- Start Of Student Registration Form Section -->
<div class="row mt-5" style="margin-bottom: 50px">
  <div class="col-sm-12 col-md-10 col-lg-8 mx-auto">
    <div class="registration-container">
      <script>
        function validate() {
          var rollno = document.getElementById("rollno");
          var name = document.getElementById("name");
          var fname = document.getElementById("fatherName");
          var mname = document.getElementById("motherName");
          var contactno = document.getElementById("contactNo");
          var emailaddress = document.getElementById("emailAddress");
          var emailexp = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
          var password = document.getElementById("password");
          var confirmpassword = document.getElementById("confirmPassword");
          
          if (rollno.value == "" || rollno.value == null) {
            alert("Please enter your rollno");
            rollno.focus();
            return false;
          } else if (isNaN(rollno.value)) {
            alert("Please enter Number only");
            rollno.focus();
            return false;
          } else if (name.value == "" || name.value == null) {
            alert("Please enter your name");
            name.focus();
            return false;
          } else if (fname.value == "" || fname.value == null) {
            alert("Please enter father name");
            fname.focus();
            return false;
          } else if (mname.value == "" || mname.value == null) {
            alert("Please enter mother name");
            mname.focus();
            return false;
          } else if (contactno.value == "" || contactno.value == null) {
            alert("Please enter contactno");
            contactno.focus();
            return false;
          } else if (isNaN(contactno.value)) {
            alert("Please enter Number only");
            contactno.focus();
            return false;
          } else if (contactno.value.length != 10) {
            alert("Please enter 10 digit No");
            contactno.focus();
            return false;
          } else if (emailaddress.value == "" || emailaddress.value == null) {
            alert("Please enter emailaddress");
            emailaddress.focus();
            return false;
          } else if (!emailexp.test(emailaddress.value)) {
            alert("Please enter valid email address");
            emailaddress.focus();
            return false;
          } else if (password.value == "" || password.value == null) {
            alert("Please enter your password");
            password.focus();
            return false;
          } else if (password.value.length < 8) {
            alert("Please enter atleast 8 digit password");
            password.focus();
            return false;
          } else if (confirmpassword.value == "" || confirmpassword.value == null) {
            alert("Please enter confirm password");
            confirmpassword.focus();
            return false;
          } else if (confirmpassword.value != password.value) {
            alert("Confirm password is not matched");
            confirmpassword.focus();
            return false;
          } else {
            // Check if any required field is empty
            var program = document.getElementById("program");
            var branch = document.getElementById("branch");
            var year = document.getElementById("year");
            var gender = document.querySelector('input[name="gender"]:checked');
            
            if (!gender) {
              alert("Please select your gender");
              return false;
            }
            if (program.value === "") {
              alert("Please select a program");
              program.focus();
              return false;
            }
            if (branch.value === "") {
              alert("Please select a branch");
              branch.focus();
              return false;
            }
            if (year.value === "") {
              alert("Please select a year");
              year.focus();
              return false;
            }
            
            document.getElementById("frmregistration").submit();
            return true;
          }
        }
      </script>
      
      {% if messages %} 
        {% for message in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          <strong>{{message}}</strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
        </div>
        {% endfor %} 
      {% endif %}

      <div class="container mt-4">
        <h2 class="text-center mb-4 form-heading">
          STUDENT REGISTRATION FORM
        </h2>
        <hr style="border-color: var(--primary-color); opacity: 0.3;" />
        
        <form
          class="p-3"
          id="frmregistration"
          method="post"
          onsubmit="event.preventDefault(); return validate();"
        >
          {% csrf_token %}
          
          <!-- Roll No -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Roll No :
            </label>
            <div class="col-sm-9">
              <input
                type="text"
                id="rollno"
                name="rollno"
                class="form-control"
                placeholder="Enter Roll No"
                required
              />
            </div>
          </div>

          <!-- Name -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Name :
            </label>
            <div class="col-sm-9">
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                placeholder="Enter Name"
                required
              />
            </div>
          </div>

          <!-- Father Name -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Father Name :
            </label>
            <div class="col-sm-9">
              <input
                type="text"
                class="form-control"
                id="fatherName"
                name="fatherName"
                placeholder="Enter Father Name"
                required
              />
            </div>
          </div>

          <!-- Mother Name -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Mother Name :
            </label>
            <div class="col-sm-9">
              <input
                type="text"
                class="form-control"
                id="motherName"
                name="motherName"
                placeholder="Enter Mother Name"
                required
              />
            </div>
          </div>

          <!-- Gender -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Select Gender :
            </label>
            <div class="col-sm-9 d-flex align-items-center">
              <div class="form-check me-3">
                <input
                  class="form-check-input"
                  type="radio"
                  name="gender"
                  id="genderMale"
                  value="male"
                  required
                />
                <label class="form-check-label" for="genderMale">Male</label>
              </div>
              <div class="form-check me-3">
                <input
                  class="form-check-input"
                  type="radio"
                  name="gender"
                  id="genderFemale"
                  value="female"
                  required
                />
                <label class="form-check-label" for="genderFemale">Female</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="gender"
                  id="genderOther"
                  value="other"
                  required
                />
                <label class="form-check-label" for="genderOther">Other</label>
              </div>
            </div>
          </div>

          <!-- Address -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Address :
            </label>
            <div class="col-sm-9">
              <textarea
                class="form-control"
                id="address"
                name="address"
                rows="2"
                placeholder="Enter Address"
                required
              ></textarea>
            </div>
          </div>

          <!-- Program - UPDATED: Dynamic dropdown from database -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Select Program :
            </label>
            <div class="col-sm-9">
              <select class="form-select" id="program" name="program" required>
                <option value="">---Select Program---</option>
                {% for prog in program %}
                <option value="{{ prog.id }}">{{ prog.program }}</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <!-- Branch - UPDATED: Dynamic dropdown from database -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Select Branch :
            </label>
            <div class="col-sm-9">
              <select class="form-select" id="branch" name="branch" required>
                <option value="">---Select Branch---</option>
                {% for br in branch %}
                <option value="{{ br.id }}">{{ br.branch }}</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <!-- Year - UPDATED: Dynamic dropdown from database -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Select Year :
            </label>
            <div class="col-sm-9">
              <select class="form-select" id="year" name="year" required>
                <option value="">---Select Year---</option>
                {% for yr in year %}
                <option value="{{ yr.id }}">{{ yr.year }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          
          <!-- Contact No -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Contact No :
            </label>
            <div class="col-sm-9">
              <input
                type="tel"
                class="form-control"
                id="contactNo"
                name="contactNo"
                placeholder="Enter Contact No"
                required
              />
            </div>
          </div>
          
          <!-- Email Address -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Email Address :
            </label>
            <div class="col-sm-9">
              <input
                type="email"
                class="form-control"
                id="emailAddress"
                name="emailAddress"
                placeholder="example@example.com"
                required
              />
            </div>
          </div>
          
          <!-- Password -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Enter Password :
            </label>
            <div class="col-sm-9">
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                placeholder="Enter Password (min 8 characters)"
                required
              />
            </div>
          </div>
          
          <!-- Confirm Password -->
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label required form-label">
              Confirm Password:
            </label>
            <div class="col-sm-9">
              <input
                type="password"
                class="form-control"
                id="confirmPassword"
                name="confirmPassword"
                placeholder="Confirm Password"
                required
              />
            </div>
          </div>

          <!-- Submit -->
          <div class="row mt-4">
            <div class="col-sm-12 text-center">
              <button 
                type="submit" 
                class="btn btn-primary"
                style="
                  background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                  border: none;
                  padding: 10px 30px;
                  font-weight: bold;
                "
              >
                Register
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- End Of Student Registration Form Section -->

<!-- Responsive styles -->
<style>
  @media (max-width: 768px) {
    .registration-container {
      width: 95% !important;
      margin: 20px auto !important;
      padding: 15px !important;
    }
    
    .form-label {
      text-align: left !important;
      margin-bottom: 5px;
    }
    
    .col-sm-3, .col-sm-9 {
      width: 100%;
      max-width: 100%;
      flex: 0 0 100%;
    }
    
    .d-flex.align-items-center {
      flex-direction: column;
      align-items: flex-start !important;
    }
    
    .form-check {
      margin-bottom: 8px;
    }
  }

  @media (max-width: 480px) {
    .registration-container {
      margin-top: 20px !important;
      padding: 10px !important;
    }
    
    .form-heading {
      font-size: 1.5rem !important;
    }
  }
</style>
{% endblock body %}